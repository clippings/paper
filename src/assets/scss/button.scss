@import 'variables';

// the code below is going to replace .button
// buttons refactoring in progress

$buttons-colors: (
  'primary': (
    'back': $brand-primary,
    'color': $white,
    'border': $brand-primary,
  ),
  'default': (
    'back': transparent,
    'color': $brand-primary,
    'border': $medium,
    'hover': (
      'back': $brand-primary,
      'color': $white,
      'border': $brand-primary,
    ),
  ),
  'danger': (
    'back': $attention,
    'color': $white,
    'border': $attention,
  ),
  'neutral': (
    'back': $medium,
    'color': $white,
    'border': $medium,
  ),
);
$button-sizes: (
  'default': (
    'height': 40px,
    'padding': 0 20px 1px 20px,
    'padding-left': 20px,
  ),
  'small': (
    'height': 32px,
    'padding': 0 10px 0.5px 10px,
    'padding-left': 10px,
  ),
  'big': (
    'height': 48px,
    'padding': 0 30px 1px 30px,
    'padding-left': 30px,
  ),
);

$btn-prefix: 'p-button';
$btn-font-size: 14px;
$icon-margin: 4px;

@mixin p-button-size($size-map) {
  height: map-get($size-map, 'height');
  max-height: map-get($size-map, 'height');
  line-height: $btn-font-size;
  padding: map-get($size-map, 'padding');
}
@mixin p-button-variant($colors) {
  background-color: map-get($colors, 'back');
  color: map-get($colors, 'color');
  border-color: #{map-get($colors, 'border')};
  &:not([disabled]) {
    &:visited {
      border-color: #{map-get($colors, 'border')} !important;
    }
    &:hover,
    &:active,
    &.active {
      @if (map-get($colors, 'hover')) {
        opacity: 1;
        $hover: map-get($colors, 'hover');
        background-color: map-get($hover, 'back');
        color: map-get($hover, 'color');
        border-color: #{map-get($hover, 'border')};
      }
    }
  }
  &[disabled] {
    opacity: 0.2;
  }
}

a,
label,
span {
  &.#{$btn-prefix} {
    text-decoration: none;
    line-height: map-get(map-get($button-sizes, 'default'), 'height') - 2px !important;
    &.#{$btn-prefix}--big {
      line-height: map-get(map-get($button-sizes, 'big'), 'height') - 2px !important;
    }
    &.#{$btn-prefix}--small {
      line-height: map-get(map-get($button-sizes, 'small'), 'height') - 2px !important;
    }
  }
}

%filled {
  text-align: center;
  border-radius: 4px;
  border-width: 1px;
  border-style: solid;
  @include p-button-size(map-get($button-sizes, 'default'));
  &.#{$btn-prefix}--small {
    @include p-button-size(map-get($button-sizes, 'small'));
  }
  &.#{$btn-prefix}--big {
    @include p-button-size(map-get($button-sizes, 'big'));
  }
  @each $type, $value in $buttons-colors {
    &.#{$btn-prefix}--#{$type} {
      @include p-button-variant($value);
    }
  }
  &.#{$btn-prefix}--circle {
    padding: 0 0;
  }
}

.#{$btn-prefix} {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  box-sizing: border-box;
  position: relative;
  background: none;
  border: none;
  outline: none;
  -webkit-box-shadow: none;
  box-shadow: none;
  font-size: $btn-font-size;
  font-weight: 500;
  cursor: pointer;
  padding: 0;
  transition: all 0.3s;
  * {
    &:hover {
      cursor: pointer;
    }
  }
  &.#{$btn-prefix}--empty:before {
    margin-right: 0;
  }
  &:hover {
    opacity: 0.9;
    text-decoration: none;
  }
  &:active,
  &:focus {
    outline: none;
    -webkit-box-shadow: none;
    box-shadow: none;
  }
  &.#{$btn-prefix}--filled {
    @extend %filled;
  }
  &.#{$btn-prefix}--circle {
    height: map-get(map-get($button-sizes, 'default'), 'height');
    width: map-get(map-get($button-sizes, 'default'), 'height');
    padding: 0 0;
    border-radius: 50%;
    overflow: hidden;
    &.#{$btn-prefix}--small {
      height: map-get(map-get($button-sizes, 'small'), 'height');
      width: map-get(map-get($button-sizes, 'small'), 'height');
    }
    &.#{$btn-prefix}--big {
      height: map-get(map-get($button-sizes, 'big'), 'height');
      width: map-get(map-get($button-sizes, 'big'), 'height');
    }
    img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
  }
  &.#{$btn-prefix}--full-width {
    width: 100%;

    &[disabled] {
      opacity: 0.2;
      cursor: default;
    }
  }
  &.#{$btn-prefix}--borderless {
    border: 0;
  }
  // social media
  &.button-twitter,
  &.button-pinterest {
    @extend %filled;
    color: $white;
  }

  &.button-twitter {
    background: $color-twitter;
    border-color: $color-twitter;
  }

  &.button-pinterest {
    background: $color-pinterest;
    border-color: $color-pinterest;
  }
}
.input-group-btn {
  .#{$btn-prefix}--filled {
    border-top-left-radius: 0;
    border-bottom-left-radius: 0;
  }
}

.#{$btn-prefix}--default {
  &:hover {
    svg {
      fill: $white;
    }
  }
}
